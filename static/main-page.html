<!DOCTYPE html>
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/neon-animation/neon-shared-element-animatable-behavior.html">
<link rel="import" href="../bower_components/neon-animation/animations/hero-animation.html">
<link rel="import" href="../bower_components/neon-animation/animations/fade-out-animation.html">
<link rel="import" href="../bower_components/neon-animation/animations/scale-up-animation.html">
<link rel="import" href="../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">

<dom-module id="main-page">
    <template>
        <paper-fab icon="build" id="mainFab" onclick="app.selected=1"></paper-fab>
        <div id="mainContent" class="flex">
            dupa
            <!-- <iframe width="100%" height="1000" src="/"></iframe> -->
        </div>
    </template>
    <script>
        Polymer({
            is: 'main-page',
            factoryImpl: function() {
                console.log("works");
            },
            behaviors: [Polymer.NeonSharedElementAnimatableBehavior],
            properties: {
                animationConfig: {
                    value: function() {
                        return {
                            'entry': [{
                                name: 'hero-animation',
                                id: 'heroToMain',
                                toPage: this
                            }, {
                                name: 'slide-from-left-animation',
                                node: this.$.mainFab
                            }, {
                                name: 'fade-in-animation',
                                node: this.$.mainFab
                            }],
                            'exit': [{
                                name: 'hero-animation',
                                id: 'heroToSettings',
                                fromPage: this
                            }, {
                                name: 'fade-out-animation',
                                node: this
                            }]
                        };
                    }
                },
                sharedElements: {
                    value: function() {
                        return {
                            'heroToSettings': this.$.mainFab,
                            'heroToMain': this.$.mainContent
                        };
                    }
                }
            }
        });
        function mainPageSetup() {
            fetch('/').then(function(res) {
                return res.text();
            }).then(function(res) {
                console.log(res);
                document.querySelector("#mainContent").innerHTML = res;
                // this.$.mainContent = res;
                // var template = document.querySelector("#bookmarksTemplate");
                // template.page = 0;
            }).catch(console.error);
        }
        // window.addEventListener("WebComponentsReady", mainPageSetup());
    </script>
</dom-module>
